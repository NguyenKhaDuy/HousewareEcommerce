<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Ware - Admin</title>
    <link rel="icon" type="image/png" href="/image/logo.png">
    <link rel="stylesheet" th:href="@{/css/adminHomeCss.css}">
    <!-- Include category management CSS when needed -->
    <link rel="stylesheet" th:href="@{/css/categoryManagement.css}" th:if="${content == 'categoryManagement'}">
</head>
<body>

<div class="sidebar">
    <div class="sidebar-header">
        <a href="#" class="flex items-center space-x-2 text-xl font-bold text-gray-800">
            <img src="/image/logo.png" alt="Homeware Logo" class="h-12 w-auto">
            <span>Homeware <span class="text-blue-600"></span></span>
        </a>
    </div>

    <div class="sidebar-section">
        <div class="section-title">QUẢN LÝ</div>

        <a href="#" class="menu-item" data-menu="thong-ke">
            <span class="menu-icon">📊</span>
            Thống kê
            <div class="notification-dot"></div>
        </a>

        <a th:href="@{/admin/categories}" class="menu-item highlighted" data-menu="danh-muc-san-pham">
            <span class="menu-icon">📋</span>
            Danh mục sản phẩm
        </a>

        <a th:href="@{/admin/products}" class="menu-item highlighted active" data-menu="san-pham">
            <span class="menu-icon">📦</span>
            Sản phẩm
        </a>

        <a th:href="@{/admin/view/discount}" class="menu-item highlighted" data-menu="khuyen-mai">
            <span class="menu-icon">🎁</span>
            Khuyến mãi
        </a>

        <a th:href="@{/admin/view/order}" class="menu-item highlighted" data-menu="don-hang">
            <span class="menu-icon">📦</span>
            Quản lý đơn hàng
        </a>

        <a th:href="@{/admin/user/getAll}" class="menu-item highlighted" data-menu="nguoi-dung">
            <span class="menu-icon">👥</span>
            Quản lý người dùng
        </a>
    </div>
</div>

<div class="header">
    <h1>Quản Lý Danh Sách Sản Phẩm</h1>
    <div class="header-right">
        <div class="breadcrumb">Admin > Danh Sách Sản Phẩm</div>
        <div class="theme-toggle">🌙</div>
        <div class="user-info">
            <span class="username" th:text="${session.username != null ? session.username : 'Admin'}">Bảo</span>
            <a th:href="@{/account/logout}" class="logout-link">Đăng xuất</a>
        </div>
    </div>
</div>

<div class="main-content">
     <th:block th:replace="${content}"></th:block>
    <!--   <th:block th:replace="~{${content}}"></th:block>-->

 </div>

 <script th:inline="javascript">
     const userRole = /*[[${session.role?:''}]]*/ '';

     if (userRole !== '1') {
         window.location.href = '/account/login';
     }
     const menuItems = {
         'thong-ke': {
             title: 'Thống Kê',
             breadcrumb: 'Admin > Thống Kê'
         },
         'danh-muc-san-pham': {
             title: 'Quản Lý Danh Mục Sản Phẩm',
             breadcrumb: 'Admin > Danh Mục Sản Phẩm'
         },
         'san-pham': {
             title: 'Quản Lý Danh Sách Sản Phẩm',
             breadcrumb: 'Admin > Danh Sách Sản Phẩm'
         },
         'khuyen-mai': {
             title: 'Quản Lý Khuyến Mãi',
             breadcrumb: 'Admin > Khuyến Mãi'
         },
         'don-hang': {
             title: 'Quản Lý Đơn Hàng',
             breadcrumb: 'Admin > Đơn Hàng'
         },
         'trang-thai-don-hang': {
             title: 'Quản Lý Trạng Thái Đơn Hàng',
             breadcrumb: 'Admin > Trạng Thái Đơn Hàng'
         },
         'nguoi-dung': {
             title: 'Quản Lý Người Dùng',
             breadcrumb: 'Admin > Người Dùng'
         },
     };

     function updateHeader(menuKey) {
         const headerTitle = document.querySelector('.header h1');
         const breadcrumb = document.querySelector('.breadcrumb');

         if (menuItems[menuKey]) {
             headerTitle.textContent = menuItems[menuKey].title;
             breadcrumb.textContent = menuItems[menuKey].breadcrumb;
         }
     }

     function setActiveMenuItem(clickedItem) {
         document.querySelectorAll('.menu-item').forEach(item => {
             item.classList.remove('active');
         });

         clickedItem.classList.add('active');
     }

     document.addEventListener('DOMContentLoaded', function() {
         const menuLinks = document.querySelectorAll('.menu-item[data-menu]');

         menuLinks.forEach((link) => {
             link.addEventListener('click', function(e) {
                 // Only prevent default for non-link items
                 if (!this.hasAttribute('href') || this.getAttribute('href') === '#') {
                     e.preventDefault();
                 }

                 const menuKey = this.getAttribute('data-menu');

                 if (menuKey && menuItems[menuKey]) {
                     updateHeader(menuKey);
                     setActiveMenuItem(this);
                     localStorage.setItem('currentMenu', menuKey);
                 }
             });
         });

         // Set active state based on current page
         const currentPath = window.location.pathname;
         if (currentPath.includes('/admin/categories')) {
             const categoryMenuItem = document.querySelector('[data-menu="danh-muc-san-pham"]');
             if (categoryMenuItem) {
                 setActiveMenuItem(categoryMenuItem);
                 updateHeader('danh-muc-san-pham');
             }
         } else {
             // Use saved menu state for other pages
             const savedMenu = localStorage.getItem('currentMenu');
             if (savedMenu && menuItems[savedMenu]) {
                 updateHeader(savedMenu);
                 const savedMenuItem = document.querySelector(`[data-menu="${savedMenu}"]`);
                 if (savedMenuItem) {
                     setActiveMenuItem(savedMenuItem);
                 }
             }
         }
     });
 </script>
 </body>
 </html>