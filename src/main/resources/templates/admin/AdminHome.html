<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Ware - Admin</title>
    <link rel="icon" type="image/png" href="/image/logo.png">
    <link rel="stylesheet" th:href="@{/css/adminHomeCss.css}">
    <!-- Include category management CSS when needed -->
    <link rel="stylesheet" th:href="@{/css/categoryManagement.css}" th:if="${content == 'categoryManagement'}">
</head>
<body>

<div class="sidebar">
    <div class="sidebar-header">
        <a href="#" class="flex items-center space-x-2 text-xl font-bold text-gray-800">
            <img src="/image/logo.png" alt="Homeware Logo" class="h-12 w-auto">
            <span>Homeware <span class="text-blue-600"></span></span>
        </a>
    </div>

    <div class="sidebar-section">
        <div class="section-title">QUáº¢N LÃ</div>

        <a href="#" class="menu-item" data-menu="thong-ke">
            <span class="menu-icon">ğŸ“Š</span>
            Thá»‘ng kÃª
            <div class="notification-dot"></div>
        </a>

        <a th:href="@{/admin/categories}" class="menu-item highlighted" data-menu="danh-muc-san-pham">
            <span class="menu-icon">ğŸ“‹</span>
            Danh má»¥c sáº£n pháº©m
        </a>

        <a th:href="@{/admin/products}" class="menu-item highlighted active" data-menu="san-pham">
            <span class="menu-icon">ğŸ“¦</span>
            Sáº£n pháº©m
        </a>

        <a th:href="@{/admin/view/discount}" class="menu-item highlighted" data-menu="khuyen-mai">
            <span class="menu-icon">ğŸ</span>
            Khuyáº¿n mÃ£i
        </a>

        <a th:href="@{/admin/view/order}" class="menu-item highlighted" data-menu="don-hang">
            <span class="menu-icon">ğŸ“¦</span>
            Quáº£n lÃ½ Ä‘Æ¡n hÃ ng
        </a>

        <a th:href="@{/admin/user/getAll}" class="menu-item highlighted" data-menu="nguoi-dung">
            <span class="menu-icon">ğŸ‘¥</span>
            Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
        </a>
    </div>
</div>

<div class="header">
    <h1>Quáº£n LÃ½ Danh SÃ¡ch Sáº£n Pháº©m</h1>
    <div class="header-right">
        <div class="breadcrumb">Admin > Danh SÃ¡ch Sáº£n Pháº©m</div>
        <div class="theme-toggle">ğŸŒ™</div>
        <div class="user-info">
            <span class="username" th:text="${session.username != null ? session.username : 'Admin'}">Báº£o</span>
            <a th:href="@{/account/logout}" class="logout-link">ÄÄƒng xuáº¥t</a>
        </div>
    </div>
</div>

<div class="main-content">
     <th:block th:replace="${content}"></th:block>
    <!--   <th:block th:replace="~{${content}}"></th:block>-->

 </div>

 <script th:inline="javascript">
     const userRole = /*[[${session.role?:''}]]*/ '';

     if (userRole !== '1') {
         window.location.href = '/account/login';
     }
     const menuItems = {
         'thong-ke': {
             title: 'Thá»‘ng KÃª',
             breadcrumb: 'Admin > Thá»‘ng KÃª'
         },
         'danh-muc-san-pham': {
             title: 'Quáº£n LÃ½ Danh Má»¥c Sáº£n Pháº©m',
             breadcrumb: 'Admin > Danh Má»¥c Sáº£n Pháº©m'
         },
         'san-pham': {
             title: 'Quáº£n LÃ½ Danh SÃ¡ch Sáº£n Pháº©m',
             breadcrumb: 'Admin > Danh SÃ¡ch Sáº£n Pháº©m'
         },
         'khuyen-mai': {
             title: 'Quáº£n LÃ½ Khuyáº¿n MÃ£i',
             breadcrumb: 'Admin > Khuyáº¿n MÃ£i'
         },
         'don-hang': {
             title: 'Quáº£n LÃ½ ÄÆ¡n HÃ ng',
             breadcrumb: 'Admin > ÄÆ¡n HÃ ng'
         },
         'trang-thai-don-hang': {
             title: 'Quáº£n LÃ½ Tráº¡ng ThÃ¡i ÄÆ¡n HÃ ng',
             breadcrumb: 'Admin > Tráº¡ng ThÃ¡i ÄÆ¡n HÃ ng'
         },
         'nguoi-dung': {
             title: 'Quáº£n LÃ½ NgÆ°á»i DÃ¹ng',
             breadcrumb: 'Admin > NgÆ°á»i DÃ¹ng'
         },
     };

     function updateHeader(menuKey) {
         const headerTitle = document.querySelector('.header h1');
         const breadcrumb = document.querySelector('.breadcrumb');

         if (menuItems[menuKey]) {
             headerTitle.textContent = menuItems[menuKey].title;
             breadcrumb.textContent = menuItems[menuKey].breadcrumb;
         }
     }

     function setActiveMenuItem(clickedItem) {
         document.querySelectorAll('.menu-item').forEach(item => {
             item.classList.remove('active');
         });

         clickedItem.classList.add('active');
     }

     document.addEventListener('DOMContentLoaded', function() {
         const menuLinks = document.querySelectorAll('.menu-item[data-menu]');

         menuLinks.forEach((link) => {
             link.addEventListener('click', function(e) {
                 // Only prevent default for non-link items
                 if (!this.hasAttribute('href') || this.getAttribute('href') === '#') {
                     e.preventDefault();
                 }

                 const menuKey = this.getAttribute('data-menu');

                 if (menuKey && menuItems[menuKey]) {
                     updateHeader(menuKey);
                     setActiveMenuItem(this);
                     localStorage.setItem('currentMenu', menuKey);
                 }
             });
         });

         // Set active state based on current page
         const currentPath = window.location.pathname;
         if (currentPath.includes('/admin/categories')) {
             const categoryMenuItem = document.querySelector('[data-menu="danh-muc-san-pham"]');
             if (categoryMenuItem) {
                 setActiveMenuItem(categoryMenuItem);
                 updateHeader('danh-muc-san-pham');
             }
         } else {
             // Use saved menu state for other pages
             const savedMenu = localStorage.getItem('currentMenu');
             if (savedMenu && menuItems[savedMenu]) {
                 updateHeader(savedMenu);
                 const savedMenuItem = document.querySelector(`[data-menu="${savedMenu}"]`);
                 if (savedMenuItem) {
                     setActiveMenuItem(savedMenuItem);
                 }
             }
         }
     });
 </script>
 </body>
 </html>